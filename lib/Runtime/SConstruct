
Import('env')

src = [
    "runtime.c",
    "debug.c",
    "util.c",
    "fdinfo.c",
    "freebsd.c",
    "events.c",
    "events_freebsd.c",
    "events_id.c",
    "events_mem.c",
    "events_posix.c",
    "events_proc.c",
    "events_sysv.c",
    "events_time.c",
    "events_llvm.c",
    "rr_assert.c",
    "rr_fdprintf.c",
]

# Made global to make compilation_db work
env["CPPPATH"].append("#sysroot-src/lib/libc/include")

#env.ObjectLibrary("libCastorRuntime.o", src)
env.StaticLibrary("libCastorRuntime.a", src)

rt = env.CopyFile("$SYSROOT/usr/lib/libCastorRuntime.a", "#build/lib/Runtime/libCastorRuntime.a")
env.Alias("CastorRuntime", rt)

#Depends("CastorRuntime", "AutoGen")
