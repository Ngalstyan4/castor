
/*** this code has been autogenerated by code in utils/gen, do not modify it directly. ***/


#include <unistd.h>
#include <sys/types.h>
#include <errno.h>
#include <fcntl.h>
#include <sys/syscall.h>

#include <castor/debug.h>
#include <castor/rrlog.h>
#include <castor/rrplay.h>
#include <castor/rrgq.h>
#include <castor/mtx.h>
#include <castor/events.h>

#include "util.h"




#include <sys/param.h>
#include <sys/sysent.h>
#include <sys/sysproto.h>
#include <sys/mount.h>
#include <sys/socket.h>
#include <sys/user.h>

#if !defined(PAD64_REQUIRED) && (defined(__powerpc__) || defined(__mips__))
#define PAD64_REQUIRED
#endif










int
__rr_cpuset(cpusetid_t * setid)
{
	int result;

    switch (rrMode) {
	case RRMODE_NORMAL:
	    return syscall(SYS_cpuset, setid);
	case RRMODE_RECORD:
	    result = syscall(SYS_cpuset, setid);
	    RRRecordI(RREVENT_CPUSET, result);
		if (result == 0) {
			logData((uint8_t *)setid, sizeof(cpusetid_t));
		}
	    break;
	case RRMODE_REPLAY:
	    RRReplayI(RREVENT_CPUSET, &result);
		if (result == 0) {
			logData((uint8_t *)setid, sizeof(cpusetid_t));
		}
	    break;
    }
    return result;
}

int
__rr_cpuset_setid(cpuwhich_t which, id_t id, cpusetid_t setid)
{
	int result;

    switch (rrMode) {
	case RRMODE_NORMAL:
	    return syscall(SYS_cpuset_setid, which, id, setid);
	case RRMODE_RECORD:
	    result = syscall(SYS_cpuset_setid, which, id, setid);
	    RRRecordI(RREVENT_CPUSET_SETID, result);
	    break;
	case RRMODE_REPLAY:
	    RRReplayI(RREVENT_CPUSET_SETID, &result);
	    break;
    }
    return result;
}

int
__rr_cpuset_getid(cpulevel_t level, cpuwhich_t which, id_t id, cpusetid_t * setid)
{
	int result;

    switch (rrMode) {
	case RRMODE_NORMAL:
	    return syscall(SYS_cpuset_getid, level, which, id, setid);
	case RRMODE_RECORD:
	    result = syscall(SYS_cpuset_getid, level, which, id, setid);
	    RRRecordI(RREVENT_CPUSET_GETID, result);
		if (result == 0) {
			logData((uint8_t *)setid, sizeof(cpusetid_t));
		}
	    break;
	case RRMODE_REPLAY:
	    RRReplayI(RREVENT_CPUSET_GETID, &result);
		if (result == 0) {
			logData((uint8_t *)setid, sizeof(cpusetid_t));
		}
	    break;
    }
    return result;
}

int
__rr_cpuset_getaffinity(cpulevel_t level, cpuwhich_t which, id_t id, size_t cpusetsize, cpuset_t * mask)
{
	int result;

    switch (rrMode) {
	case RRMODE_NORMAL:
	    return syscall(SYS_cpuset_getaffinity, level, which, id, cpusetsize, mask);
	case RRMODE_RECORD:
	    result = syscall(SYS_cpuset_getaffinity, level, which, id, cpusetsize, mask);
	    RRRecordI(RREVENT_CPUSET_GETAFFINITY, result);
		if (result == 0) {
			logData((uint8_t *)mask, sizeof(cpuset_t));
		}
	    break;
	case RRMODE_REPLAY:
	    RRReplayI(RREVENT_CPUSET_GETAFFINITY, &result);
		if (result == 0) {
			logData((uint8_t *)mask, sizeof(cpuset_t));
		}
	    break;
    }
    return result;
}

int
__rr_cpuset_setaffinity(cpulevel_t level, cpuwhich_t which, id_t id, size_t cpusetsize, const cpuset_t * mask)
{
	int result;

    switch (rrMode) {
	case RRMODE_NORMAL:
	    return syscall(SYS_cpuset_setaffinity, level, which, id, cpusetsize, mask);
	case RRMODE_RECORD:
	    result = syscall(SYS_cpuset_setaffinity, level, which, id, cpusetsize, mask);
	    RRRecordI(RREVENT_CPUSET_SETAFFINITY, result);
		if (result == 0) {
			logData((uint8_t *)mask, sizeof(const cpuset_t));
		}
	    break;
	case RRMODE_REPLAY:
	    RRReplayI(RREVENT_CPUSET_SETAFFINITY, &result);
		if (result == 0) {
			logData((uint8_t *)mask, sizeof(const cpuset_t));
		}
	    break;
    }
    return result;
}

BIND_REF(cpuset);
BIND_REF(cpuset_setid);
BIND_REF(cpuset_getid);
BIND_REF(cpuset_getaffinity);
BIND_REF(cpuset_setaffinity);
